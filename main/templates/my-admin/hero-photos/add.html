{% extends 'my-admin/base.html' %}

{% block title %}Add Hero Photo{% endblock %}

{% block extra_style %}
<style>
    .page-header { margin-bottom: 32px; }
    .page-title { font-size: 28px; font-weight: 700; color: var(--black); margin-bottom: 8px; }
    .breadcrumb { display: flex; gap: 8px; align-items: center; font-size: 14px; color: var(--gray-500); }
    .breadcrumb a { color: var(--primary-color); text-decoration: none; }
    .breadcrumb a:hover { text-decoration: underline; }

    .form-card { background: var(--white); border: 1px solid var(--gray-200); border-radius: 12px; padding: 32px; }
    .form-group { margin-bottom: 24px; }
    .form-label { display: block; font-size: 14px; font-weight: 600; color: var(--gray-700); margin-bottom: 8px; }
    .form-label span { color: #ef4444; }
    .form-control {
        width: 100%; padding: 12px 16px; border: 1px solid var(--gray-300);
        border-radius: 8px; font-size: 14px; color: var(--black);
        transition: border-color 0.2s; box-sizing: border-box;
    }
    .form-control:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.1); }
    .form-hint { font-size: 12px; color: var(--gray-500); margin-top: 6px; }

    .file-upload-area {
        border: 2px dashed var(--gray-300); border-radius: 12px; padding: 40px 20px;
        text-align: center; cursor: pointer; transition: all 0.2s;
        position: relative;
    }
    .file-upload-area:hover { border-color: var(--primary-color); background: rgba(14, 165, 233, 0.02); }
    .file-upload-area input[type="file"] { position: absolute; inset: 0; opacity: 0; cursor: pointer; width: 100%; height: 100%; }
    .file-upload-icon { font-size: 40px; color: var(--gray-400); margin-bottom: 12px; }
    .file-upload-text { font-size: 14px; color: var(--gray-600); }
    .file-upload-hint { font-size: 12px; color: var(--gray-400); margin-top: 6px; }

    .img-preview { display: none; width: 100%; max-height: 260px; object-fit: cover; border-radius: 10px; margin-top: 14px; }

    .toggle-row { display: flex; align-items: center; gap: 12px; }
    .toggle-switch { position: relative; width: 46px; height: 24px; }
    .toggle-switch input { opacity: 0; width: 0; height: 0; }
    .toggle-slider {
        position: absolute; inset: 0; background: var(--gray-300);
        border-radius: 24px; cursor: pointer; transition: 0.3s;
    }
    .toggle-slider:before {
        content: ''; position: absolute; width: 18px; height: 18px;
        left: 3px; top: 3px; background: white; border-radius: 50%; transition: 0.3s;
    }
    input:checked + .toggle-slider { background: #22c55e; }
    input:checked + .toggle-slider:before { transform: translateX(22px); }

    .btn {
        display: inline-flex; align-items: center; gap: 8px;
        padding: 12px 24px; border-radius: 10px; font-size: 14px;
        font-weight: 600; cursor: pointer; transition: all 0.3s ease;
        text-decoration: none; border: none;
    }
    .btn-primary { background: linear-gradient(135deg, var(--primary-color), var(--primary-dark)); color: var(--white); }
    .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(14, 165, 233, 0.3); }
    .btn-secondary { background: var(--gray-100); color: var(--gray-700); }
    .btn-secondary:hover { background: var(--gray-200); }

    .form-actions { display: flex; gap: 12px; margin-top: 8px; }
</style>
{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">Add Hero Photo</h1>
    <div class="breadcrumb">
        <a href="{% url 'hero_photo_list' %}">Hero Photos</a>
        <span>›</span>
        <span>Add Photo</span>
    </div>
</div>

<div class="form-card">
    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}

        <!-- Image upload -->
        <div class="form-group">
            <label class="form-label">Photo <span>*</span></label>
            <div class="file-upload-area" id="upload-area">
                <input type="file" name="image" id="image-input" accept="image/jpeg,image/png,image/webp" required>
                <div class="file-upload-icon"><i class="fa-solid fa-image"></i></div>
                <div class="file-upload-text">Click to upload or drag & drop</div>
                <div class="file-upload-hint">JPG, PNG or WEBP · Max 10 MB</div>
            </div>
            <img id="img-preview" class="img-preview" alt="Preview">
        </div>

        <!-- Caption -->
        <div class="form-group">
            <label class="form-label" for="caption">Caption</label>
            <input type="text" name="caption" id="caption" class="form-control"
                placeholder="e.g. MoU Signing Ceremony, Office Opening..." maxlength="200">
            <p class="form-hint">Optional. Shown as a small label on the photo.</p>
        </div>

        <!-- Display Order -->
        <div class="form-group">
            <label class="form-label" for="display_order">Display Order</label>
            <input type="number" name="display_order" id="display_order" class="form-control"
                value="0" min="0" style="max-width: 140px;">
            <p class="form-hint">Lower numbers appear first. Use 0, 1, 2, …</p>
        </div>

        <!-- Active toggle -->
        <div class="form-group">
            <label class="form-label">Show on Website</label>
            <div class="toggle-row">
                <label class="toggle-switch">
                    <input type="checkbox" name="is_active" checked>
                    <span class="toggle-slider"></span>
                </label>
                <span style="font-size: 14px; color: var(--gray-600);">Active (visible on homepage)</span>
            </div>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">
                <i class="fa-solid fa-upload"></i> Upload Photo
            </button>
            <a href="{% url 'hero_photo_list' %}" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>
{% endblock %}

{% block extra_script %}
<script>
document.getElementById('image-input').addEventListener('change', function () {
    const file = this.files[0];
    if (!file) return;
    const preview = document.getElementById('img-preview');
    preview.src = URL.createObjectURL(file);
    preview.style.display = 'block';
    document.querySelector('.file-upload-text').textContent = file.name;
});
</script>
{% endblock %}
